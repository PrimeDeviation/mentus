<!DOCTYPE html>
<html>

<head>
  <title>Mentus Tab</title>
  <link rel="stylesheet" type="text/css" href="../styles/main.css">
  <link rel="stylesheet" type="text/css" href="settings/settings.css">
</head>

<body>
  <div class="container">
    <div id="chatbar" class="chatbar">
      <div id="chatbar-content">
        <div id="chat-messages" class="chat-messages"></div>
        <div class="form-group">
          <label for="chat-models">Chat Models:</label>
          <select id="chat-models">
              <option value="">Select a model</option>
          </select>
        </div>
        <div class="chat-input-container">
          <input type="text" id="chat-input" placeholder="Type a message...">
          <button id="send-button">Send</button>
        </div>
      </div>
    </div>
    <div id="main-content" class="main-content">
    <div class="tabs">
      <button class="tab-button" data-tab="graph">Graph</button>
      <button class="tab-button" data-tab="docs">Docs</button>
      <button class="tab-button" data-tab="editor">Editor</button>
      <button class="tab-button" data-tab="settings">Settings</button>
    </div>
    <div id="tab-content">
      <div id="graph" class="tab-content active">Graph Content</div>
      <div id="docs" class="tab-content">Docs Content</div>
      <div id="editor" class="tab-content">Editor Content</div>
      <div id="settings" class="tab-content">
        <div id="settings-content">
          <h1>Settings</h1>
          <form id="settings-form">
            <div class="form-group">
              <label for="openai-api-key">OpenAI API Key:</label>
              <input type="password" id="openai-api-key" placeholder="Enter OpenAI API Key">
              <span id="openai-api-key-display" class="current-value"></span>
            </div>
            <div class="form-group">
              <label for="anthropic-api-key">Anthropic API Key:</label>
              <input type="password" id="anthropic-api-key" placeholder="Enter Anthropic API Key">
              <span id="anthropic-api-key-display" class="current-value"></span>
            </div>
            <div class="form-group">
              <label for="graphdb-endpoint">GraphDB Endpoint:</label>
              <input type="text" id="graphdb-endpoint" placeholder="Enter GraphDB Endpoint">
              <span id="graphdb-endpoint-display" class="current-value"></span>
            </div>
            <div class="form-group">
              <label for="graphdb-creds">GraphDB Credentials:</label>
              <input type="text" id="graphdb-creds" placeholder="Enter GraphDB Credentials">
              <span id="graphdb-creds-display" class="current-value"></span>
            </div>
            <div class="form-group">
              <label for="local-storage-location">Local Storage Location:</label>
              <input type="text" id="local-storage-location" placeholder="Enter Local Storage Location">
              <span id="local-storage-location-display" class="current-value"></span>
            </div>
          </form>
        </div>
      </div>
    </div>
    </div>
  </div>
  <script src="./mentus_tab.js"></script>
  <script src="./settings/settings_script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      try {
        // Existing code from mentus_tab.js
        const tabButtons = document.querySelectorAll('.tab-button');
        tabButtons.forEach(button => {
          button.addEventListener('click', (event) => {
            const tabName = event.target.getAttribute('data-tab');
            showTab(tabName);
          });
        });
        
        showTab('settings');
        
        // Add save button to the chat interface
        const chatbar = document.getElementById('chatbar-content');
        if (chatbar) {
          const saveButton = document.createElement('button');
          saveButton.id = 'save-chat';
          saveButton.textContent = 'Save Chat';
          saveButton.addEventListener('click', saveChatSession);
          chatbar.insertBefore(saveButton, chatbar.firstChild);
        }

        // Add event listener for beforeunload to save chat automatically
        window.addEventListener('beforeunload', saveChatSession);
        
        loadChatModels();
      } catch (error) {
        console.error('Error in DOMContentLoaded event listener:', error);
      }
    });
  </script>
</body>

</html>
